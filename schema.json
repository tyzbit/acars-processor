{"$schema":"https://json-schema.org/draft/2020-12/schema","$ref":"#/$defs/Config","$defs":{"ACARSAnnotatorConfig":{"properties":{"Enabled":{"type":"boolean","description":"Should this be enabled?","default":true},"SelectedFields":{"items":{"type":"string"},"type":"array","description":"Fields to provide to receivers from this annotator.","examples":[["acarsASSStatus","acarsAcknowledge","acarsAircraftTailCode","acarsAppName","acarsAppProxied","acarsAppProxiedBy","acarsAppRouterUUID","acarsAppRouterVersion","acarsAppVersion","acarsBlockID","acarsChannel","acarsErrorCode","acarsExtraACARSDramaTailNumberLink","acarsExtraImageLink","acarsExtraPhotosLink","acarsExtraThumbnailLink","acarsExtraTrackingLink","acarsExtraTranslateLink","acarsFlightNumber","acarsFrequencyMHz","acarsLabel","acarsMessageFrom","acarsMessageNumber","acarsMessageText","acarsMode","acarsSignaldBm","acarsStationID","acarsTimestamp"]]}},"additionalProperties":false,"type":"object"},"ACARSConnectionConfig":{"properties":{"Host":{"type":"string","description":"IP or DNS to your ACARSHub instance serving JSON data from a particular port.","default":"acarshub"},"Port":{"type":"integer","description":"ACARS JSON port.","default":15550}},"additionalProperties":false,"type":"object","required":["Host","Port"]},"ACARSFilterConfig":{"properties":{"Enabled":{"type":"boolean","description":"Should this be enabled?","default":true},"DuplicateMessageSimilarity":{"type":"number","description":"Only process ACARS messages that are at least this percent (ex: 0.8 for 80 percent) different than any other message received."}},"additionalProperties":false,"type":"object"},"ACARSHubConfig":{"properties":{"ACARS":{"$ref":"#/$defs/ACARSConnectionConfig","description":"ACARS-specific settings when connecting to ACARSHub."},"VDLM2":{"$ref":"#/$defs/VDLM2Connection","description":"VDLM2-specific settings when connecting to ACARSHub."},"MaxConcurrentRequests":{"type":"integer","description":"Maximum number of requests from ACARSHub to process at once."}},"additionalProperties":false,"type":"object"},"ACARSProcessorDatabaseConfig":{"properties":{"Enabled":{"type":"boolean","description":"Whether or not to use a database to save messages.","default":false},"Type":{"type":"string","description":"Type of database to use","examples":["sqlite","mariadb"]},"ConnectionString":{"type":"string","description":"Connection string (if using an external database)","examples":["user:pass@tcp(127.0.0.1:3306)/dbname?charset=utf8mb4\u0026parseTime=True\u0026loc=Local"]},"SQLiteDatabasePath":{"type":"string","description":"Path to the database file (if using SQLITE). If set to an empty string (\"\"), database will be in-memory only.","default":"./messages.db"}},"additionalProperties":false,"type":"object"},"ACARSProcessorSettings":{"properties":{"ColorOutput":{"type":"boolean","description":"Force whether or not color output is used.","default":true},"Database":{"$ref":"#/$defs/ACARSProcessorDatabaseConfig","description":"Database configuration"},"LogLevel":{"type":"string","description":"Set logging verbosity.","default":"info"},"LogHideTimestamps":{"type":"boolean","description":"Whether to refrain from printing timestamps in logs.","default":false},"ACARSHub":{"$ref":"#/$defs/ACARSHubConfig","description":"ACARSHub connection settings."}},"additionalProperties":false,"type":"object","required":["ACARSHub"]},"ADSBExchangeAnnotatorConfig":{"properties":{"Enabled":{"type":"boolean","description":"Should this be enabled?","default":true},"APIKey":{"type":"string","description":"APIKey provided by signing up at ADSB-Exchange."},"ReferenceGeolocation":{"type":"string","description":"Geolocation to use for distance calculations (LAT,LON)."},"SelectedFields":{"items":{"type":"string"},"type":"array","description":"Fields to provide to receivers from this annotator.","examples":[["adsbAircraftDistanceKm","adsbAircraftDistanceMi","adsbAircraftGeolocation","adsbAircraftLatitude","adsbAircraftLongitude","adsbOriginGeolocation","adsbOriginGeolocationLatitude","adsbOriginGeolocationLongitude"]]}},"additionalProperties":false,"type":"object","required":["APIKey"]},"AnnotatorsConfig":{"properties":{"ACARS":{"$ref":"#/$defs/ACARSAnnotatorConfig","description":"ACARS annotator, you probably want this enabled if you are ingesting ACARS messages into ACARSHub."},"VDLM2":{"$ref":"#/$defs/VDLM2AnnotatorConfig","description":"VDLM2 annotator, you probably want this enabled if you are ingesting VDLM2 messages into ACARSHub."},"ADSBExchange":{"$ref":"#/$defs/ADSBExchangeAnnotatorConfig","description":"Look up geolocation, including distance from a reference point to aircraft, from ADSB-Exchange."},"Tar1090":{"$ref":"#/$defs/Tar1090AnnotatorConfig","description":"Look up geolocation, including distance from a reference point to aircraft, from a tar1090 instance (which can be self-hosted)"},"Ollama":{"$ref":"#/$defs/OllamaAnnotatorConfig","description":"Use Ollama (which can be self-hosted) to annotate messages, such as to answer custom questions about the message (\"Is this message about coffee makers?\")."}},"additionalProperties":false,"type":"object"},"Config":{"properties":{"ACARSProcessorSettings":{"$ref":"#/$defs/ACARSProcessorSettings","description":"These control acars-processor"},"Annotators":{"$ref":"#/$defs/AnnotatorsConfig","description":"Services that receive raw ACARS/VDLM2 messages and return more information, usually after a lookup or additional processing."},"Filters":{"$ref":"#/$defs/FiltersConfig","description":"Filter messages out before being processed."},"Receivers":{"$ref":"#/$defs/ReceiversConfig","description":"After messages are filtered and annotated, they're sent to all configured receivers. One example is Discord Webhooks, which allow you to post messages to a channel in Discord."}},"additionalProperties":false,"type":"object","required":["ACARSProcessorSettings"],"description":"Main configuration for acars-processor. Have fun!"},"DiscordWebhookReceiverConfig":{"properties":{"Enabled":{"type":"boolean","description":"Should this be enabled?","default":true},"URL":{"type":"string","description":"Full URL to the Discord webhook for a channel (edit a channel in the Discord UI for the option to create a webhook)."},"Embed":{"type":"boolean","description":"Should an embed be sent instead of a simpler message?","default":true},"EmbedColorFacetFields":{"items":{"type":"string"},"type":"array","description":"Pick one or more fields that deterministically determines the embed color"},"FormatText":{"type":"boolean","description":"Surround fields with message content with backticks so they are monospaced and stand out.","default":true},"FormatTimestamps":{"type":"boolean","description":"Add Discord-specific formatting to show human-readable instants from timestamps","default":true},"RequiredFields":{"items":{"type":"string"},"type":"array","description":"Require a specific field to be populated or else no message will be sent"}},"additionalProperties":false,"type":"object","required":["URL"]},"FiltersConfig":{"properties":{"Generic":{"$ref":"#/$defs/GenericFilterConfig","description":"Simple built-in filters."},"ACARS":{"$ref":"#/$defs/ACARSFilterConfig","description":"Built-in filters for ACARS messages."},"VDLM2":{"$ref":"#/$defs/VDLM2FilterConfig","description":"Built-in filters for VDLM2 messages."},"Ollama":{"$ref":"#/$defs/OllamaFilterConfig","description":"Use Ollama (which can be self-hosted) to choose to filter messages based on plain-text criteria."},"OpenAI":{"$ref":"#/$defs/OpenAIFilterConfig","description":"Use OpenAI to choose to filter messages based on plain-text criteria."}},"additionalProperties":false,"type":"object"},"GenericFilterConfig":{"properties":{"HasText":{"type":"boolean","description":"Only process messages with text included."},"TailCode":{"type":"string","description":"Only process messages that have this tail code."},"FlightNumber":{"type":"string","description":"Only process messages that have this flight number."},"ASSStatus":{"type":"string","description":"Only process messages that have ASS Status."},"AboveSignaldBm":{"type":"number","description":"Only process messages that were received above this signal strength (in dBm)."},"BelowSignaldBm":{"type":"number","description":"Only process messages that were received below this signal strength (in dBm)."},"Frequency":{"type":"number","description":"Only process messages received on this frequency."},"StationID":{"type":"string","description":"Only process messages with this station ID."},"FromTower":{"type":"boolean","description":"Only process messages that were from a ground-based transmitter - determined by the presence (from aircraft) or lack of (from ground) a flight number."},"FromAircraft":{"type":"boolean","description":"Only process messages that were from an aircraft - determined by the presence (from aircraft) or lack of (from ground) a flight number."},"More":{"type":"boolean","description":"Only process messages that have the \"More\" flag set."},"AboveDistanceNm":{"type":"number","description":"Only process messages that came from aircraft further than this many nautical miles away (requires ADS-B or tar1090)."},"BelowDistanceNm":{"type":"number","description":"Only process messages that came from aircraft closer than this many nautical miles away (requires ADS-B or tar1090)."},"Emergency":{"type":"boolean","description":"Only process messages that have the \"Emergency\" flag set."},"DictionaryPhraseLengthMinimum":{"type":"integer","description":"Only process messages that have at least this many valid dictionary words in a row."}},"additionalProperties":false,"type":"object"},"NewRelicReceiverConfig":{"properties":{"Enabled":{"type":"boolean","description":"Should this be enabled?","default":true},"APIKey":{"type":"string","description":"API License key to use New Relic."},"CustomEventType":{"type":"string","description":"Name for the custom event type to create (example if set to \"MyCustomACARSEvents\": `FROM MyCustomACARSEvents SELECT count(timestamp)`). If not provided, it will be `CustomACARS`."}},"additionalProperties":false,"type":"object","required":["APIKey"]},"OllamaAnnotatorConfig":{"properties":{"Enabled":{"type":"boolean","description":"Should this be enabled?","default":true},"Model":{"type":"string","description":"Model to use (you need to pull this in Ollama to use it).","default":"llama3.2"},"URL":{"type":"string","description":"URL to the Ollama instance to use (include protocol and port).","examples":["http://ollama-service:11434"]},"SystemPrompt":{"type":"string","description":"Override the system prompt (not usually necessary). This instructs Ollama how to behave with user prompts (ex: pretend you are a pirate. all answers must end in \"arrr!\"). This might make other options less effective."},"MaxRetryAttempts":{"type":"integer","description":"Maximum number of retries to make against the Ollama URL."},"MaxRetryDelaySeconds":{"type":"integer","description":"How long to wait before retrying the Ollama API."},"Timeout":{"type":"integer","description":"How long to wait until giving up on any request to Ollama."},"Options":{"items":{"$ref":"#/$defs/OllamaOptionsConfig"},"type":"array","description":"Whether to surround the returned message field with backticks."},"UserPrompt":{"type":"string","description":"Instructions for Ollama for processing messages. More detail produces better results. you can include a question and Ollama will respond yes/no which can also be used to filter the message.","examples":["Is there prose in this message? If present, prose will be the last section of a message. Return any prose if found."]},"FilterWithQuestion":{"type":"boolean","description":"If there is a question in the user prompt, this controls whether to use the answer to filter the message."},"SelectedFields":{"items":{"type":"string"},"type":"array","description":"Fields to provide to receivers from this annotator.","examples":[["OllamaEditActions","OllamaEditActions","OllamaProcessedText","OllamaProcessedText","OllamaQuestion","OllamaQuestion"]]}},"additionalProperties":false,"type":"object","required":["Model","URL","UserPrompt"]},"OllamaFilterConfig":{"properties":{"Enabled":{"type":"boolean","description":"Should this be enabled?","default":true},"Model":{"type":"string","description":"Model to use (you need to pull this in Ollama to use it).","default":"llama3.2"},"URL":{"type":"string","description":"URL to the Ollama instance to use (include protocol and port).","examples":["http://ollama-service:11434"]},"SystemPrompt":{"type":"string"},"MaxRetryAttempts":{"type":"integer","description":"Maximum number of retries to make against the Ollama URL."},"MaxRetryDelaySeconds":{"type":"integer","description":"How long to wait before retrying the Ollama API."},"Timeout":{"type":"integer","description":"How long to wait until giving up on any request to Ollama."},"Options":{"items":{"$ref":"#/$defs/OllamaOptionsConfig"},"type":"array","description":"Additional options to provide to the model. This is specific to each model, so no defaults are provided"},"FilterOnFailure":{"type":"boolean","description":"Whether to filter messages where Ollama itself fails. Recommended if your ollama instance sometimes returns errors."},"UserPrompt":{"type":"string","description":"Instructions for Ollama for processing messages. More detail produces better results.","examples":["Is there prose in this message?"]},"MaxPredictionTokens":{"type":"integer","description":"Maximum number of tokens to include in the answer. Lower values restrict response length but too low may clip the valid response short."}},"additionalProperties":false,"type":"object","required":["Model","URL","UserPrompt"]},"OllamaOptionsConfig":{"properties":{"Name":{"type":"string","description":"Option name, specific to the model you are using.","default":"example_value"},"Value":{"description":"Value for this particular option, any value is allowed."}},"additionalProperties":false,"type":"object","required":["Name","Value"]},"OpenAIFilterConfig":{"properties":{"Enabled":{"type":"boolean","description":"Should this be enabled?","default":true},"APIKey":{"type":"string"},"Model":{"type":"string","description":"Model to use.","default":"gpt-4o"},"UserPrompt":{"type":"string","description":"Instructions for OpenAI model to use when filtering messages. More detail is better.","examples":["Does this message talk about coffee makers or lavatories (shortand LAV is sometimes used)?"]},"SystemPrompt":{"type":"string","description":"Override the built-in system prompt to instruct the model on how to behave for requests (not usually necessary)."},"Timeout":{"type":"integer","description":"How long to wait until giving up on any request to OpenAI."}},"additionalProperties":false,"type":"object","required":["APIKey","Model","UserPrompt"]},"ReceiversConfig":{"properties":{"NewRelic":{"$ref":"#/$defs/NewRelicReceiverConfig","description":"Send messages to NewRelic as a custom event type."},"Webhook":{"$ref":"#/$defs/WebHookReceiverConfig","description":"Generic webhook receiver. Please read README for how to use custom payloads."},"DiscordWebhook":{"$ref":"#/$defs/DiscordWebhookReceiverConfig","description":"Send messages to a Discord channel using a webhook created from that channel."}},"additionalProperties":false,"type":"object"},"Tar1090AnnotatorConfig":{"properties":{"Enabled":{"type":"boolean","description":"Should this be enabled?","default":true},"URL":{"type":"string","description":"URL to your tar1090 instance"},"ReferenceGeolocation":{"type":"string","description":"Geolocation to use for distance calculations (LAT,LON)."},"SelectedFields":{"items":{"type":"string"},"type":"array","description":"Fields to provide to receivers from this annotator.","examples":[["tar1090AircraftADSBMessageCount","tar1090AircraftAltimeterBarometerFeet","tar1090AircraftAltimeterBarometerRateFeetPerSecond","tar1090AircraftAltimeterGeometricFeet","tar1090AircraftDescription","tar1090AircraftDirectionDegrees","tar1090AircraftDistanceKm","tar1090AircraftDistanceMi","tar1090AircraftDistanceNm","tar1090AircraftEmergency","tar1090AircraftFlightNumber","tar1090AircraftGeolocation","tar1090AircraftHexCode","tar1090AircraftLatitude","tar1090AircraftLongitude","tar1090AircraftNavModes","tar1090AircraftOwnerOperator","tar1090AircraftRSSIdBm","tar1090AircraftType","tar1090AircraftYearOfManufacture","tar1090ReferenceGeolocation","tar1090ReferenceGeolocationLatitude","tar1090ReferenceGeolocationLongitude"]]}},"additionalProperties":false,"type":"object","required":["URL"]},"VDLM2AnnotatorConfig":{"properties":{"Enabled":{"type":"boolean","description":"Should this be enabled?","default":true},"SelectedFields":{"items":{"type":"string"},"type":"array","description":"Fields to provide to receivers from this annotator.","examples":[["acarsAcknowledge","acarsAircraftTailCode","acarsBlockID","acarsCRCOK","acarsErrorCode","acarsExtraACARSDramaTailNumberLink","acarsExtraImageLink","acarsExtraPhotosLink","acarsExtraThumbnailLink","acarsExtraTrackingLink","acarsExtraTranslateLink","acarsFlightNumber","acarsLabel","acarsMessageFrom","acarsMessageNumber","acarsMessageNumberSequence","acarsMessageText","acarsMode","acarsMore","vdlm2AppName","vdlm2AppProxied","vdlm2AppProxiedBy","vdlm2AppRouterUUID","vdlm2AppRouterVersion","vdlm2AppVersion","vdlm2BurstLengthOctets","vdlm2FrequencyHz","vdlm2FrequencySkew","vdlm2HDRBitsFixed","vdlm2Index","vdlm2NoiseLevel","vdlm2OctetsCorrectedByFEC","vdlm2SignalLeveldBm","vdlm2Station","vdlm2Timestamp","vdlm2TimestampMicroseconds","vdlmCR","vdlmDestinationAddress","vdlmDestinationType","vdlmFrameType","vdlmPoll","vdlmRSequence","vdlmSSequence","vdlmSourceAddress","vdlmSourceStatus","vdlmSourceType"]]}},"additionalProperties":false,"type":"object"},"VDLM2Connection":{"properties":{"Host":{"type":"string","description":"IP or DNS to your ACARSHub instance serving JSON data from a particular port.","default":"acarshub"},"Port":{"type":"integer","description":"VDLM2 JSON port.","default":15555}},"additionalProperties":false,"type":"object","required":["Host","Port"]},"VDLM2FilterConfig":{"properties":{"Enabled":{"type":"boolean","description":"Should this be enabled?","default":true},"DuplicateMessageSimilarity":{"type":"number","description":"Only process VDLM2 messages that are at least this percent (ex: 0.8 for 80 percent) different than any other message received."}},"additionalProperties":false,"type":"object"},"WebHookReceiverConfig":{"properties":{"Enabled":{"type":"boolean","description":"Should this be enabled?","default":true},"URL":{"type":"string","description":"URL, including port and params, to the desired webhook.","examples":["https://webhook:8443/webhook/?enable_feature=yes"]},"Method":{"type":"string","description":"Method when calling webhook (GET,POST,PUT etc).","default":"POST"},"Headers":{"items":{"$ref":"#/$defs/WebHookReceiverConfigHeaders"},"type":"array","description":"Additional headers to send along with the request."}},"additionalProperties":false,"type":"object","required":["URL","Method"]},"WebHookReceiverConfigHeaders":{"properties":{"Name":{"type":"string","description":"Header name."},"Value":{"type":"string","description":"Header value."}},"additionalProperties":false,"type":"object","required":["Name","Value"]}}}
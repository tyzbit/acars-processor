{"$schema":"https://json-schema.org/draft/2020-12/schema","$ref":"#/$defs/Config","$defs":{"ACARSAnnotatorConfig":{"properties":{"Enabled":{"type":"boolean","default":true},"SelectedFields":{"type":"string","examples":["acarsFrequencyMHz,acarsChannel,acarsErrorCode,acarsSignaldBm,acarsTimestamp,acarsAppName,acarsAppVersion,acarsAppProxied,acarsAppProxiedBy,acarsAppRouterVersion,acarsAppRouterUUID,acarsStationID,acarsASSStatus,acarsMode,acarsLabel,acarsBlockID,acarsAcknowledge,acarsAircraftTailCode,acarsMessageFrom,acarsMessageText,acarsMessageNumber,acarsFlightNumber,acarsExtraURL,acarsExtraPhotos"]}},"additionalProperties":false,"type":"object","required":["Enabled"]},"ACARSConnectionConfig":{"properties":{"Host":{"type":"string","default":"acarshub"},"Port":{"type":"integer","default":15550}},"additionalProperties":false,"type":"object","required":["Host","Port"]},"ACARSFilterConfig":{"properties":{"DuplicateMessageSimilarity":{"type":"number","examples":[0.9]}},"additionalProperties":false,"type":"object"},"ACARSHubConfig":{"properties":{"ACARS":{"$ref":"#/$defs/ACARSConnectionConfig"},"VDLM2":{"$ref":"#/$defs/VDLM2Connection"},"MaxConcurrentRequests":{"type":"integer"}},"additionalProperties":false,"type":"object"},"ADSBExchangeAnnotatorConfig":{"properties":{"APIKey":{"type":"string"},"ReferenceGeolocation":{"type":"string","examples":["35.6244416,139.7753782"]},"SelectedFields":{"type":"string","examples":["adsbOriginGeolocation,adsbOriginGeolocationLatitude,adsbOriginGeolocationLongitude,adsbAircraftGeolocation,adsbAircraftLatitude,adsbAircraftLongitude,adsbAircraftDistanceKm,adsbAircraftDistanceMi"]}},"additionalProperties":false,"type":"object","required":["APIKey"]},"AnnotatorsConfig":{"properties":{"ACARS":{"$ref":"#/$defs/ACARSAnnotatorConfig"},"VDLM2":{"$ref":"#/$defs/VDLM2AnnotatorConfig"},"ADSBExchange":{"$ref":"#/$defs/ADSBExchangeAnnotatorConfig"},"Tar1090":{"$ref":"#/$defs/Tar1090AnnotatorConfig"},"Ollama":{"$ref":"#/$defs/OllamaAnnotatorConfig"}},"additionalProperties":false,"type":"object"},"Config":{"properties":{"LogLevel":{"type":"string","default":"info"},"ACARSHub":{"$ref":"#/$defs/ACARSHubConfig"},"Annotators":{"$ref":"#/$defs/AnnotatorsConfig"},"Filters":{"$ref":"#/$defs/FiltersConfig"},"Receivers":{"$ref":"#/$defs/ReceiversConfig"}},"additionalProperties":false,"type":"object","required":["ACARSHub"]},"DiscordWebhookReceiverConfig":{"properties":{"URL":{"type":"string"}},"additionalProperties":false,"type":"object","required":["URL"]},"FiltersConfig":{"properties":{"Generic":{"$ref":"#/$defs/GenericFilterConfig"},"ACARS":{"$ref":"#/$defs/ACARSFilterConfig"},"VDLM2":{"$ref":"#/$defs/VDLM2FilterConfig"},"Ollama":{"$ref":"#/$defs/OllamaFilterConfig"},"OpenAI":{"$ref":"#/$defs/OpenAIFilterConfig"}},"additionalProperties":false,"type":"object"},"GenericFilterConfig":{"properties":{"HasText":{"type":"boolean"},"TailCode":{"type":"string"},"FlightNumber":{"type":"string"},"ASSStatus":{"type":"string","examples":["anything"]},"AboveSignaldBm":{"type":"number","examples":[-10.0]},"BelowSignaldBm":{"type":"number","examples":[-10.0]},"Frequency":{"type":"number","examples":[136.950]},"StationID":{"type":"string","examples":["N12346"]},"FromTower":{"type":"boolean"},"FromAircraft":{"type":"boolean"},"More":{"type":"boolean"},"AboveDistanceNm":{"type":"number","examples":[15.5]},"BelowDistanceNm":{"type":"number","examples":[15.5]},"Emergency":{"type":"boolean"},"DictionaryPhraseLengthMinimum":{"type":"integer","examples":[5]}},"additionalProperties":false,"type":"object"},"NewRelicReceiverConfig":{"properties":{"APIKey":{"type":"string"},"CustomEventType":{"type":"string","examples":["CustomACARS"]}},"additionalProperties":false,"type":"object","required":["APIKey"]},"OllamaAnnotatorConfig":{"properties":{"Model":{"type":"string","default":"llama3.2"},"URL":{"type":"string","examples":["http://ollama-service:11434"]},"UserPrompt":{"type":"string","examples":["Is there prose in this message? If present, prose will be the last section of a message. Return any prose if found. Surround it with triple backticks."]},"SystemPrompt":{"type":"string"},"SelectedFields":{"type":"string","examples":["ollamaProcessedText,ollamaEditActions,ollamaQuestion"]},"FilterWithQuestion":{"type":"boolean"},"MaxPredictionTokens":{"type":"integer","examples":[512]},"MaxRetryAttempts":{"type":"integer","examples":[5]},"MaxRetryDelaySeconds":{"type":"integer","examples":[5]},"Timeout":{"type":"integer","examples":[5]}},"additionalProperties":false,"type":"object","required":["Model","URL","UserPrompt"]},"OllamaFilterConfig":{"properties":{"FilterOnFailure":{"type":"boolean"},"Model":{"type":"string","default":"llama3.2"},"URL":{"type":"string","examples":["http://ollama-service:11434"]},"UserPrompt":{"type":"string","examples":["Is there prose in this message?"]},"SystemPrompt":{"type":"string"},"MaxPredictionTokens":{"type":"integer"},"MaxRetryAttempts":{"type":"integer","examples":[5]},"MaxRetryDelaySeconds":{"type":"integer","examples":[5]},"Timeout":{"type":"integer","examples":[5]}},"additionalProperties":false,"type":"object","required":["Model","URL","UserPrompt"]},"OpenAIFilterConfig":{"properties":{"APIKey":{"type":"string"},"Model":{"type":"string","default":"gpt-4o"},"UserPrompt":{"type":"string","examples":["Does this message talk about coffee makers or lavatories (shortand LAV is sometimes used)?"]},"SystemPrompt":{"type":"string"},"Timeout":{"type":"integer","examples":[5]}},"additionalProperties":false,"type":"object","required":["APIKey","Model","UserPrompt"]},"ReceiversConfig":{"properties":{"NewRelic":{"$ref":"#/$defs/NewRelicReceiverConfig"},"Webhook":{"$ref":"#/$defs/WebHookReceiverConfig"},"DiscordWebhook":{"$ref":"#/$defs/DiscordWebhookReceiverConfig"}},"additionalProperties":false,"type":"object"},"Tar1090AnnotatorConfig":{"properties":{"URL":{"type":"string"},"ReferenceGeolocation":{"type":"string","examples":["35.6244416,139.7753782"]},"SelectedFields":{"type":"string","examples":["tar1090ReferenceGeolocation,tar1090ReferenceGeolocationLatitude,tar1090ReferenceGeolocationLongitude,tar1090AircraftEmergency,tar1090AircraftGeolocation,tar1090AircraftLatitude,tar1090AircraftLongitude,tar1090AircraftDistanceKm,tar1090AircraftDistanceMi,tar1090AircraftDistanceNm,tar1090AircraftDirectionDegrees,tar1090AircraftAltimeterBarometerFeet,tar1090AircraftAltimeterGeometricFeet,tar1090AircraftAltimeterBarometerRateFeetPerSecond,tar1090AircraftOwnerOperator,tar1090AircraftFlightNumber,tar1090AircraftHexCode,tar1090AircraftType,tar1090AircraftDescription,tar1090AircraftYearOfManufacture,tar1090AircraftADSBMessageCount,tar1090AircraftRSSIdBm,tar1090AircraftNavModes"]}},"additionalProperties":false,"type":"object","required":["URL"]},"VDLM2AnnotatorConfig":{"properties":{"Enabled":{"type":"boolean","default":true},"SelectedFields":{"type":"string","examples":["vdlm2AppName,vdlm2AppVersion,vdlm2AppProxied,vdlm2AppProxiedBy,vdlm2AppRouterVersion,vdlm2AppRouterUUID,vdlmCR,vdlmDestinationAddress,vdlmDestinationType,vdlmFrameType,vdlmSourceAddress,vdlmSourceType,vdlmSourceStatus,vdlmRSequence,vdlmSSequence,vdlmPoll,vdlm2BurstLengthOctets,vdlm2FrequencyHz,vdlm2Index,vdlm2FrequencySkew,vdlm2HDRBitsFixed,vdlm2NoiseLevel,vdlm2OctetsCorrectedByFEC,vdlm2SignalLeveldBm,vdlm2Station,vdlm2Timestamp,vdlm2TimestampMicroseconds,acarsErrorCode,acarsCRCOK,acarsMore,acarsAircraftTailCode,acarsMode,acarsLabel,acarsBlockID,acarsAcknowledge,acarsFlightNumber,acarsMessageFrom,acarsMessageNumber,acarsMessageNumberSequence,acarsMessageText,acarsExtraURL,acarsExtraPhotos"]}},"additionalProperties":false,"type":"object","required":["Enabled"]},"VDLM2Connection":{"properties":{"Host":{"type":"string","default":"acarshub"},"Port":{"type":"integer","default":15555}},"additionalProperties":false,"type":"object","required":["Host","Port"]},"VDLM2FilterConfig":{"properties":{"DuplicateMessageSimilarity":{"type":"number","examples":[0.9]}},"additionalProperties":false,"type":"object"},"WebHookReceiverConfig":{"properties":{"URL":{"type":"string","examples":["https://webhook:8443/webhook/?enable_feature=yes"]},"Method":{"type":"string","default":"POST"},"Headers":{"items":{"$ref":"#/$defs/WebHookReceiverConfigHeaders"},"type":"array"}},"additionalProperties":false,"type":"object","required":["URL","Method"]},"WebHookReceiverConfigHeaders":{"properties":{"Name":{"type":"string"},"Value":{"type":"string"}},"additionalProperties":false,"type":"object","required":["Name","Value"]}}}